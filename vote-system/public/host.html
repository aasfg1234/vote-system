<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸»æŒäººæ§åˆ¶å°</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500&family=Noto+Serif+TC:wght@400;600;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body id="host-page">
    <div class="host-grid">
        
        <div class="container">
            <h2 style="margin-bottom:20px;">ğŸ› æ§åˆ¶é¢æ¿</h2>
            <div class="pin-badge">PIN: <span id="host-pin-display">----</span></div>
            
            <div class="host-controls">
                <div class="form-group">
                    <label>å¿«é€Ÿæ¨£æ¿ï¼š</label>
                    <div style="display:flex; gap:8px; margin-bottom:15px; flex-wrap:wrap;">
                        <button class="preset-btn" onclick="applyPreset('yesno')">â­• æ˜¯é</button>
                        <button class="preset-btn" onclick="applyPreset('scale')">ğŸ“Š è©•åˆ†</button>
                        <button class="preset-btn" onclick="applyPreset('lunch')">ğŸ± åˆé¤</button>
                    </div>

                    <label>é¡Œç›®</label>
                    <input type="text" id="h-question" placeholder="è«‹è¼¸å…¥è¨è«–è­°é¡Œ..." value="ç¯„ä¾‹ï¼šæ¥ä¸‹ä¾†çš„å„ªå…ˆé †åºï¼Ÿ">
                </div>
                
                <div class="form-group">
                    <label>é¸é …</label>
                    <input type="text" class="opt-text" value="é¸é … A" style="margin-bottom:8px;">
                    <input type="text" class="opt-text" value="é¸é … B" style="margin-bottom:8px;">
                    <input type="text" class="opt-text" value="é¸é … C" style="margin-bottom:8px;">
                    <input type="text" class="opt-text" placeholder="é¸é … D..." style="margin-bottom:8px;">
                </div>
                
                <div class="form-group" style="display:flex; gap:10px; flex-wrap:wrap; margin-top:15px;">
                    <div style="flex:1; min-width: 120px;">
                        <label>å€’æ•¸ç§’æ•¸</label>
                        <input type="number" id="h-timer" value="0">
                    </div>
                    <div style="flex:1; display:flex; align-items:center; padding-top:25px;">
                        <input type="checkbox" id="h-multi" style="margin-right:5px;">
                        <label for="h-multi">è¤‡é¸</label>
                    </div>
                    <div style="flex:1; display:flex; align-items:center; padding-top:25px;">
                        <input type="checkbox" id="h-blind" style="margin-right:5px;">
                        <label for="h-blind" style="color:var(--primary); font-weight:bold;">ğŸ™ˆ ç›²æ¸¬</label>
                    </div>
                </div>

                <div style="display:flex; gap:10px; margin-top:20px;">
                    <button id="clear-form-btn" class="btn" style="background:#8e8d8a; flex:1;">ğŸ§¹ æ¸…ç©º</button>
                    <button id="start-vote-btn" class="btn" style="flex:2;">ğŸš€ ç™¼å¸ƒ</button>
                </div>
                <button id="stop-vote-btn" class="btn btn-stop">ğŸ›‘ å¼·åˆ¶çµæŸ</button>
                <button id="export-btn" class="btn" style="background:var(--success); margin-top:10px;">ğŸ“¥ ä¸‹è¼‰çµæœ (CSV)</button>
            </div>
        </div>

        <div class="container">
            <div class="link-info-box">
                <div class="link-label">æƒæåŠ å…¥æœƒè­°</div>
                <div id="qrcode" style="display:flex; justify-content:center; margin: 15px 0;"></div>
                <div class="link-label">æˆ–è¼¸å…¥ç¶²å€</div>
                <a id="join-link" href="#" target="_blank" class="link-text">Loading...</a>
                <hr style="border:0; border-top:1px dashed var(--border); margin:15px 0;">
                <button id="open-projector-btn" class="btn" style="background:#8b5cf6;">
                    ğŸ“º é–‹å•Ÿå¤§è¢å¹•æŠ•å½±é é¢
                </button>
            </div>

            <h2 style="margin-bottom:20px;">ğŸ“± ç¾å ´é è¦½</h2>
            <div id="login-screen" class="hidden"></div>
            <div id="vote-screen">
                <div class="status-bar">
                    <span id="status-text">ç­‰å¾…ä¸­</span>
                    <span>â± <span id="timer">0s</span> | ğŸ‘¥ <span id="total-votes">0</span></span>
                </div>
                <div id="question-text" class="question">ç­‰å¾…ç™¼å¸ƒ...</div>
                <div id="options-container"></div>
            </div>
        </div>
    </div>

    <div id="toast"></div>
    <input type="hidden" id="pin-input"> 
    <button id="join-btn" class="hidden"></button>

    <script src="/socket.io/socket.io.js"></script>
    <script src="app.js"></script>
    <script>
        // é é¢è¼‰å…¥å¾Œç”¢ç”Ÿ QR Code
        window.addEventListener('load', () => {
            let baseUrl = window.location.href.replace('/host.html', '').replace(/\/$/, '');
            const linkEl = document.getElementById('join-link');
            linkEl.textContent = baseUrl;
            linkEl.href = baseUrl;

            new QRCode(document.getElementById("qrcode"), {
                text: baseUrl,
                width: 120, height: 120,
                colorDark : "#3f4238", colorLight : "#ffffff",
                correctLevel : QRCode.CorrectLevel.H
            });
        });
    </script>
</body>
</html>
</body>
</html>

